import DisplayAllFeedbacks from '../Sections/DisplayAllFeedbacks'
import Step1ReusableComponent from '../Sections/Step1ReusableComponent'
import Step2StateSharing from '../Sections/Step2StateSharing'
import Step3LifecycleMethods from '../Sections/Step3LifecycleMethods'
import Step4SimpleJSX from '../Sections/Step4SimpleJSX'
import Step5Accordion from '../Sections/Step5Accordion'
import Step6ContactForm from '../Sections/Step6ContactForm'


export const steps = [
    {
        title: 'Reusable React Components',
        code: "import Toast from \"../Components/Toast\";\nimport Button from \"../Components/Button\";\n\nconst ButtonWithToast = ({ label, toastMessage, toastEmoji }) => {\n  const handleClick = () => {\n    Toast(toastMessage, toastEmoji);\n  };\n\n  return (\n    <Button label={label} onClick={handleClick} />\n  );\n};\n\nconst Step1ReusableComponent = () => (\n  <>\n       <ButtonWithToast\n        label=\"Greet\"\n        toastMessage=\"Hello there!\"\n        toastEmoji=\"👋\"\n      />\n      <ButtonWithToast\n        label=\"Celebrate\"\n        toastMessage=\"Congratulations!\"\n        toastEmoji=\"🎉\"\n      />\n      <ButtonWithToast\n        label=\"Warning\"\n        toastMessage=\"Be careful!\"\n        toastEmoji=\"⚠️\"\n      />\n    </div>\n  </>\n);\n\nexport default Step1ReusableComponent;",
        component: <Step1ReusableComponent />,
    },
    {
        title: 'Sharing State Between Components',
        code: "import React, { useState } from 'react';\nimport Button from '../Components/Button';\n\nconst Child = ({ count, increment }) => (\n  <div>\n    <p className=\"text-gray-800 mb-2\">Count: {count}</p>\n    <Button onClick={increment} label={'Increment'} />\n  </div>\n);\n\nconst StateSharing = () => {\n  const [count, setCount] = useState(0);\n  return (\n    <Child count={count} increment={() => setCount(count + 1)} />\n  );\n};\n\nexport default StateSharing;"
        ,
        component: <Step2StateSharing />,
    },
    {
        title: 'Lifecycle Methods in React',
        code: "// components/LifecycleMethods.jsx\nimport React, { useEffect, useState } from 'react';\nimport Button from '../Components/Button';\nimport Toast from '../Components/Toast';\n\nconst LifecycleMethods = () => {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    const now = new Date();\n    const formattedTime = now.toLocaleTimeString('en-US', {\n      hour12: false,\n      second: '2-digit'\n    }) + '.' + now.getMilliseconds().toString().padStart(3, '0');\n\n    Toast(`Component mounted or updated at ${formattedTime}`, '🔔');\n\n    return () => {\n      Toast(`Component will unmount at ${formattedTime}`, '🔔');\n    };\n  }, [count]);\n\n  return (\n      <p className=\"text-gray-800 mb-2\">Count: {count}</p>\n      <Button onClick={() => setCount(count + 1)} label={'Increment'} />\n    </div>\n  );\n};\n\nexport default LifecycleMethods;",
        component: <Step3LifecycleMethods />,
    },
    {
        title: 'Simple JSX Component',
        code: "import React, { useState } from 'react';\nimport Toast from '../Components/Toast';\nimport Button from '../Components/Button';\n\nconst Greeting = ({ name }) => {\n  const handleClick = () => {\n    Toast(`Hello, ${name}!`, '👋', 'top-center');\n  };\n  return (\n    <h3 onClick={handleClick} className=\"text-lg text-blue-600 cursor-pointer\">\n      Welcome, {name}!\n    </h3>\n  );\n};\n\nconst SkillsList = ({ skills }) => (\n  <>\n    <h2 className=\"text-xl font-semibold mt-4 mb-2\">Skill List</h2>\n    <ul className=\"list-disc list-inside mb-4\">\n      {skills.map((skill, index) => (\n        <li key={index} className=\"text-gray-700\">\n          {skill}\n        </li>\n      ))}\n    </ul>\n  </>\n);\n\nconst SimpleJSX = () => {\n  const [name, setName] = useState('React Developer');\n  const [showSkills, setShowSkills] = useState(true);\n  const [skills, setSkills] = useState(['JSX', 'Hooks', 'State Management']);\n  const [newSkill, setNewSkill] = useState('');\n\n  const handleAddSkill = (e) => {\n    e.preventDefault();\n    const trimmedSkill = newSkill.trim();\n    if (trimmedSkill && !skills.includes(trimmedSkill)) {\n      setSkills((prevSkills) => [...prevSkills, trimmedSkill]);\n      setNewSkill('');\n    }\n  };\n\n  const toggleSkills = () => setShowSkills((prev) => !prev);\n\n  return (\n    <div>\n      <Greeting name={name} />\n      <div className=\"my-4\">\n        <input\n          type=\"text\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          className=\"border border-gray-300 rounded px-3 py-1 w-full\"\n          placeholder=\"Enter your name\"\n        />\n      </div>\n      <form onSubmit={handleAddSkill} className=\"flex items-center space-x-2 mb-10\">\n        <input\n          type=\"text\"\n          value={newSkill}\n          onChange={(e) => setNewSkill(e.target.value)}\n          className=\"flex-1 border border-gray-300 rounded px-3 py-2\"\n          placeholder=\"Enter new skill\"\n        />\n        <Button label={'Add Skill'} type=\"submit\" />\n      </form>\n      <button\n        onClick={toggleSkills}\n        className={`px-4 py-2 rounded mb-2 ${\n          showSkills ? 'bg-red-500 hover:bg-red-600' : 'bg-blue-500 hover:bg-blue-600'\n        } text-white`}\n      >\n        {showSkills ? 'Hide' : 'Show'} Skills\n      </button>\n      {showSkills && <SkillsList skills={skills} />}\n    </div>\n  );\n};\n\nexport default SimpleJSX;",
        component: <Step4SimpleJSX />,
    },
    {
        title: 'Accordion Component',
        code: "// data/accordionData.js \n export const accordionData = [\n  {\n    title: 'Section 1',\n    content: 'Content for section 1 goes here. This is a brief snippet of information.'\n  },\n  {\n    title: 'Section 2',\n    content: 'Content for section 2 goes here. This is another snippet of information.'\n  },\n  {\n    title: 'Section 3',\n    content: 'Content for section 3 goes here. Yet another snippet of information.'\n  }\n]; \n \n \n //components/AccordionItem.jsx \n const AccordionItem = ({ title, content, isOpen, onClick }) => (\n  <div className=\"border-b border-gray-200\">\n    <button\n      className=\"w-full text-left px-4 py-3 focus:outline-none flex justify-between items-center\"\n      onClick={onClick}\n    >\n      <span className=\"text-lg font-medium\">{title}</span>\n      <span\n        className=\"ml-2 transform transition-transform duration-200\"\n        style={{ transform: isOpen ? 'rotate(90deg)' : 'rotate(0deg)' }}\n      >\n        ▶\n      </span>\n    </button>\n    {isOpen && (\n      <div className=\"px-4 py-2 text-gray-700\">\n        {content}\n      </div>\n    )}\n  </div>\n);\n\nexport default AccordionItem; \n \n \n  // components/Accordion.jsx \n import React, { useState } from 'react';\nimport { accordionData as items } from '../data/accordionData';\nimport AccordionItem from '../Components/AccordionItem';\n\nconst Accordion = () => {\n  const [openIndex, setOpenIndex] = useState(0);\n\n  const handleClick = (index) => {\n    setOpenIndex(prevIndex => (prevIndex === index ? index : index));\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto bg-white shadow-md rounded-md overflow-hidden\">\n      {items.map((item, index) => (\n        <AccordionItem\n          key={index}\n          title={item.title}\n          content={item.content}\n          isOpen={openIndex === index}\n          onClick={() => handleClick(index)}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default Accordion;\n",
        component: <Step5Accordion />,
    },
    {
        title: 'Contact Form Submission',
        code: "import React, { useState } from 'react';\nimport Toast from '../Components/Toast';\nimport Button from '../Components/Button';\n\nconst ContactForm = () => {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    message: '',\n  });\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted:', formData);\n    setSubmitted(true);\n  };\n\n  return (\n    <div className=\"bg-white shadow-md rounded-lg p-6 w-full max-w-md mx-auto\">\n      {submitted ? (\n        <p className=\"text-green-600\">\n          Thank you for your feedback!\n        </p>\n      ) : (\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <label htmlFor=\"name\" className=\"block text-gray-700 mb-2\">\n              Name:\n            </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded\"\n              required\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label htmlFor=\"email\" className=\"block text-gray-700 mb-2\">\n              Email:\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded\"\n              required\n            />\n          </div>\n          <div className=\"mb-4\">\n            <label htmlFor=\"message\" className=\"block text-gray-700 mb-2\">\n              Feedback:\n            </label>\n            <textarea\n              id=\"message\"\n              name=\"message\"\n              value={formData.message}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded\"\n              rows=\"4\"\n              required\n            ></textarea>\n          </div>\n\n          <Button label='Submit' type='submit' />\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default ContactForm;",
        component: <Step6ContactForm />,
    },
    {
        title: 'All Feedbacks',
        code: "import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { format } from 'date-fns';\r\nimport Toast from '../Components/Toast';\r\n\r\nconst DisplayAllFeedbacks = () => {\r\n    const [feedbacks, setFeedbacks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [editDialog, setEditDialog] = useState(false);\r\n    const [selectedFeedback, setSelectedFeedback] = useState(null);\r\n    const [formData, setFormData] = useState({ name: '', email: '', feedback: '' });\r\n\r\n    // Fetch feedbacks from API\r\n    useEffect(() => {\r\n        const fetchFeedbacks = async () => {\r\n            try {\r\n                const response = await axios.get('/api/feedbacks');\r\n                setFeedbacks(response.data);\r\n                console.log(response.data)\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error('Error fetching feedbacks:', error);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchFeedbacks();\r\n    }, []);\r\n\r\n    // Handle delete feedback\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm('Are you sure you want to delete this feedback?')) {\r\n            try {\r\n                setLoading(true)\r\n                await axios.delete(`/api/feedbacks/${id}`);\r\n                setFeedbacks(feedbacks.filter(fb => fb.id !== id));\r\n                Toast('Feedback removed permanently!', '❌');\r\n                setLoading(false)\r\n            } catch (error) {\r\n                console.error('Error deleting feedback:', error);\r\n                Toast('Failed to delete feedback!', '❌');\r\n                setLoading(false)\r\n            }\r\n        }\r\n    };\r\n\r\n    // Handle edit feedback\r\n    const handleEdit = (feedback) => {\r\n        setSelectedFeedback(feedback);\r\n        setFormData({\r\n            name: feedback.name,\r\n            email: feedback.email,\r\n            message: feedback.message\r\n        });\r\n        setEditDialog(true);\r\n    };\r\n\r\n    // Update feedback\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.put(\r\n                `/api/feedbacks/${selectedFeedback.id}`,\r\n                formData\r\n            );\r\n            setFeedbacks(feedbacks.map(fb =>\r\n                fb.id === selectedFeedback.id ? response.data : fb\r\n            ));\r\n            Toast('Changes saved successfully!', '✅');\r\n            setEditDialog(false);\r\n        } catch (error) {\r\n            console.error('Error updating feedback:', error);\r\n            Toast('Failed to update feedback!', '❌');\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"text-center p-4\">Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"p-4 max-w-full mx-auto\">\r\n            <h1 className=\"text-2xl font-bold mb-6\">All Feedbacks</h1>\r\n\r\n            <div className=\"overflow-x-auto rounded-lg border\">\r\n                <div className=\"bg-gray-50 grid grid-cols-12 gap-4 p-3 font-semibold\">\r\n                    <div className=\"col-span-1\">ID</div>\r\n                    <div className=\"col-span-2\">Name</div>\r\n                    <div className=\"col-span-4\">Email</div>\r\n                    <div className=\"col-span-3\">Time</div>\r\n                    <div className=\"col-span-2\">Actions</div>\r\n                </div>\r\n\r\n                {feedbacks.map((feedback) => (\r\n                    <div key={feedback.id} className=\"grid grid-cols-12 gap-4 p-3 border-t hover:bg-gray-50 text-sm\">\r\n                        <div className=\"col-span-1\">{feedback.id}</div>\r\n                        <div className=\"col-span-2\">{feedback.name}</div>\r\n                        <div className=\"col-span-4\">{feedback.email}</div>\r\n                        <div className=\"col-span-3\">\r\n                            {format(new Date(feedback.created_at), 'dd/MM/yy HH:mm')}\r\n                        </div>\r\n                        <div className=\"col-span-2 flex gap-2\">\r\n                            <button\r\n                                onClick={() => handleEdit(feedback)}\r\n                                className=\"text-blue-600 hover:text-blue-800\"\r\n                            >\r\n                                Edit\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleDelete(feedback.id)}\r\n                                className=\"text-red-600 hover:text-red-800\"\r\n                            >\r\n                                Delete\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Edit Dialog */}\r\n            {editDialog && (\r\n                <div className=\"fixed inset-0 bg-gray-900/90 backdrop-blur-lg flex items-center justify-center p-4\">\r\n                    <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n                        <h2 className=\"text-xl font-bold mb-4\">Edit Feedback</h2>\r\n                        <form onSubmit={handleSubmit}>\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block mb-1\">Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.name}\r\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                        className=\"w-full p-2 border rounded\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1\">Email</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={formData.email}\r\n                                        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                        className=\"w-full p-2 border rounded\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1\">Feedback</label>\r\n                                    <textarea\r\n                                        value={formData.message}\r\n                                        onChange={(e) => setFormData({ ...formData, message: e.target.value })}\r\n                                        className=\"w-full p-2 border rounded h-24\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mt-6 flex justify-end gap-3\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setEditDialog(false)}\r\n                                    className=\"px-4 py-2 text-gray-600 hover:text-gray-800\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                                >\r\n                                    Save Changes\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {feedbacks.length === 0 && !loading && (\r\n                <div className=\"text-center p-8 text-gray-500\">\r\n                    No feedbacks found\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DisplayAllFeedbacks;",
        component: <DisplayAllFeedbacks />
    }
];
